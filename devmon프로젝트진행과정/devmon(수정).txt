//devmon.c _ìˆ˜ì • 12.03
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <Windows.h>

#define NUM 3 // ê°œë°œëª¬ ìˆ«ì

//-----------------------------------------------------------------------------êµ¬ì¡°ì²´ ì •ì˜
typedef struct // ê°œë°œëª¬ ì •ë³´
{
	char* name;
	int iNum; //ê³ ìœ  ë²ˆí˜¸(ì¸ë±ìŠ¤ ë„˜ë²„)
	int hp, max_hp, mp, max_mp;
	int power, sk_power;
} DevMon;
DevMon init_mon = { "0",-1, };
DevMon devmon[NUM] = { {"ì´ìˆ˜ë¹ˆ",0,},{"ë°•ìŠ¹ë²”",1,} ,{"ì •ê´‘ì„ ",2,} };
//ë§¤ê°œë³€ìˆ˜ monê³¼ í—·ê°ˆë¦¬ì§€ ì•Šê²Œ ì´ë¦„ë³€ê²½í•¨

typedef struct //ìœ ì € ì •ë³´ ì €ì¥
{
	char name[20];
	char pre_pos; //ìœ ì € ê¸°ì¡´ ìœ„ì¹˜ ì €ì¥
	int level, xp, hour;
	int xpos, ypos; 
	int total_hp, max_hp; 
} UserInfo;
UserInfo userS = { "",'0',1,0,0,0,0,0,0};
DevMon user_mon[3] = { {"0",-1,},{"0",-1,} ,{"0",-1,} };

typedef struct //ì´ë¯¸ì§€ ì¶œë ¥
{
    FILE* img[NUM];
    char arr[100];
}ImgList;
ImgList character;
//-----------------------------------------------------------------------------ë§µ ì„¤ì •
//ë§µ êµ¬í˜„
char map[25][25] =
{
{'1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1'}, //1ì€ ë²½
{'1', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', '1', '0', '0', '0', '1', 'd', 'd', 'd', 'd', 'd', '1'}, //0ì€ ë³µë„
{'1', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', '1', '0', '0', '0', '1', 'd', 'd', 'd', 'd', 'd', '1'}, //cê°€ êµì‹¤ - ìƒì‚°
{'1', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', '2', '0', '0', '0', '1', 'd', 'd', 'd', 'd', 'd', '1'}, //dê°€ êµì‹¤ - ë“œë¡ 
{'1', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', '1', '0', '0', '0', '1', 'd', 'd', 'd', 'd', 'd', '1'}, //eê°€ êµì‹¤ - iot
{'1', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', 'c', '1', '0', '0', '0', '1', 'd', 'd', 'd', 'd', 'd', '1'}, //hê°€ ê¸‰ì‹ì‹¤
{'1', '1', '1', '1', '1', '2', '1', '1', '1', '1', '1', '2', '1', '1', '1', '0', '0', '0', '2', 'd', 'd', 'd', 'd', 'd', '1'}, //pê°€ êµìˆ˜ì‹¤
{'1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1', 'd', 'd', 'd', 'd', 'd', '1'}, //2ì´ ì¼ë°˜ë¬¸
{'1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1', 'd', 'd', 'd', 'd', 'd', '1'}, //3ê°€ êµìˆ˜ì‹¤ ë¬¸
{'1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1', 'd', 'd', 'd', 'd', 'd', '1'}, //qê°€ êµ¬ê¸‰ì°¨
{'1', '1', '1', '1', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1', 'd', 'd', 'd', 'd', 'd', '1'},
{'1', 'h', 'h', 'h', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1', 'd', 'd', 'd', 'd', 'd', '1'},
{'1', 'h', 'q', 'h', '2', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '2', 'd', 'd', 'd', 'd', 'd', '1'},
{'1', 'h', 'h', 'h', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1', 'd', 'd', 'd', 'd', 'd', '1'},
{'1', '1', '1', '1', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1', '1', '1', '1', '1', '1', '1'},
{'1', '0', '0', '0', '0', '0', '0', '1', '1', '2', '1', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1'},
{'1', '0', '0', '0', '0', '0', '0', '1', 'e', 'e', 'e', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1'},
{'1', '0', '0', '0', '0', '0', '0', '1', 'e', 'e', 'e', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1'},
{'1', '0', '0', '0', '0', '0', '0', '1', 'e', 'e', 'e', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '1'},
{'1', '1', '1', '1', '2', '1', '1', '1', 'e', 'e', 'e', '1', '0', '0', '0', '0', '0', '0', '0', '1', '1', '1', '1', '1', '1'},
{'1', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', '2', '0', '0', '0', '0', '0', '0', '0', '1', 'p', 'p', 'p', 'p', '1'},
{'1', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', '1', '0', '0', '0', '0', '0', '0', '0', '1', 'p', 'p', 'p', 'p', '1'},
{'1', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', '1', '0', '0', '0', '0', '0', '0', '0', '1', 'p', 'p', 'p', 'p', '1'},
{'1', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', 'e', '1', '0', '0', '0', '0', '0', '0', '0', '3', 'p', 'p', 'p', 'p', '1'},
{'1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1'}
};

//ë§µ ì¶œë ¥ í•¨ìˆ˜
void PrintingMap(void);

//ë§µ ì´ë™ í•¨ìˆ˜
void Move(char* user);

//ëœë¤ ìŠ¤í° í•¨ìˆ˜ -> ì•„ì´í…œ ëœë¤ ìŠ¤í°ìœ¼ë¡œ ì´ìš©í•´ë„ ë  ë“¯?
void RandomSpawn(void);

//ë¦¬ìŠ¤í° í•¨ìˆ˜(ì£½ìœ¼ë©´ êµ¬ê¸‰ì°¨ë¡œ ìŠ¤í°)
void ReSpawn(void);

//-----------------------------------------------------------------------------DevMon ì„¤ì •
//ê°œë°œëª¬ ìˆ˜ ì„¸ëŠ” í•¨ìˆ˜(ë°°ì—´ ì´ë¦„ ì…ë ¥ë°›ìŒ)
int CountMon(DevMon* mon);

//íŒ€ ì˜ì… í•¨ìˆ˜(mon1->mon2) idx=mon1ì¸ë±ìŠ¤
void AddTeam(DevMon* mon1, DevMon* mon2, int idx);

//ìœ ì € hpì •ë³´ ê°±ì‹ 
void UpdateHp(void);

//Hp ì „ì²´ íšŒë³µ (ë°°ì—´ ì´ë¦„ ì…ë ¥ ë°›ìŒ)
void HealALLHp(DevMon* mon);

//monë¦¬ìŠ¤íŠ¸ì˜ idxë²ˆ ë©¤ë²„ amountë§Œí¼ íšŒë³µ
void HealHp(DevMon* mon, int amount, int idx);

//monë¦¬ìŠ¤íŠ¸ì˜ idxë²ˆ ê°œë°œëª¬ Hp amount ë§Œí¼ ê¹ì„
void MinusHp(DevMon* mon, int idx, int amount);

//monë¦¬ìŠ¤íŠ¸ ì „ì²´ ê°œë°œëª¬ Hp amount ë§Œí¼ ê¹ì¼ë•Œ
void MinusALLHp(DevMon* mon, int amount);

//ë ˆë²¨ì—… í•¨ìˆ˜

//mon ë¦¬ìŠ¤íŠ¸ ì¶œë ¥
void PrintingMon(DevMon* mon);

//ê°œë°œëª¬ ì„ íƒ(mon ë¦¬ìŠ¤íŠ¸ì—ì„œ ì„ íƒí•œ ë©¤ë²„ì˜ ì¸ë±ìŠ¤ ë°˜í™˜)
int ChooseMon(DevMon* mon);

//ê°œë°œëª¬ ì´ˆê¸° ëŠ¥ë ¥ì¹˜ ì„¤ì •
void init_play(void);

//---------------------------------------------------------------------------ì „íˆ¬, í€´ì¦ˆ
//ê°œë°œëª¬ ì „íˆ¬ í•¨ìˆ˜
//void BattleCore()
//{
//    system("cls");
//    int npcNum = rand() % CountMon(devmon);
//    int userNum = CountMon(user_mon);
//    int selNum;
//    int btQuit = 1;
//
//    while (btQuit == 1)
//    {
//        selNum = SelecMonster(userNum);
//        while (1)
//        {
//            PrintBattleInfo(selNum, npcNum);
//            printf("\n <<<<< í–‰ë™ ì„ íƒ >>>>> \n");
//            printf("1)ì¼ë°˜ ê³µê²©  2)íŠ¹ìˆ˜ ê³µê²©  3)ì•„ì´í…œ ì°½  4)ë„ë§ê°€ê¸° : ");
//            btQuit = 0;
//            break;
//        }
//    }
//
//}

//ì „íˆ¬ í™”ë©´
//void PrintBattleInfo(int our, int enemy)
//{
//    printf("-----------------------------------------------------\n");
//    printf("(%s)%s HP: %d/%d  MP: %d/%d  DMG: %d\n", userS.name, user_mon[our].name, user_mon[our].hp, user_mon[our].max_hp, user_mon[our].mp, user_mon[our].max_mp, user_mon[our].power);
//    printf("-----------------------------------------------------\n");
//
//    printf("-----------------------------------------------------\n");
//    printf("(NPC)%s HP: %d/%d  MP: %d/%d  DMG: %d\n", devmon[enemy].name, devmon[enemy].hp, devmon[enemy].max_hp, devmon[enemy].mp, devmon[enemy].max_mp, devmon[enemy].power);
//    printf("-----------------------------------------------------\n");
//}
//
////ì „íˆ¬ ê°œë°œëª¬ ì„ íƒ
//int SelecMonster(int num)
//{
//    int i;
//    int selNum = 0;
//    while (1)
//    {
//        if (num > 1)
//        {
//            for (i = 0; i < num; i++)
//            {
//                printf("%d) %s HP:%d/%d MP:%d/%d DMG:%d SDMG:%d \n", i + 1, user_mon[i].name, user_mon[i].hp, user_mon[i].max_hp, user_mon[i].mp, user_mon[i].max_mp, user_mon[i].power, user_mon[i].sk_power);
//            }
//            printf("\n\n ëª‡ ë²ˆ ëª¬ìŠ¤í„°ë¡œ ì‹¸ìš°ì‹¤ê¹Œìš”? : ");
//            scanf("%d", &selNum);
//            selNum -= 1;
//            if (user_mon[selNum - 1].hp == 0)
//                printf("ì²´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ê³¨ë¼ì£¼ì„¸ìš”");
//            else
//                break;
//        }
//        else
//        {
//            selNum = 0;
//            break;
//        }
//    }
//    return selNum;
//}

//í€´ì¦ˆë‹¨ ì§€ê°‘ í„¸ê¸° //ìˆ˜ì‹ í…ŒìŠ¤íŠ¸
void QuestionMon(int cnum); //í´ë˜ìŠ¤ ìœ„ì¹˜ ë°›ê¸°(ìƒì‚°: 0, ë“œë¡ : 1, iot: 2)

//--------------------------------------------------------------------------ã…¡main í•¨ìˆ˜
int main(void)
{
    srand((unsigned int)time(NULL));
    char user[2]; //ìœ ì € ì…ë ¥ ì¸ì
    int idx, event; // í™•ë¥  ë³€ìˆ˜

    init_play(); //ê°œë°œëª¬ ëŠ¥ë ¥ì¹˜ ì„¤ì •

    printf("ì‹œì‘í™”ë©´ \n");
    //char title[1000] = { 0, };
    //FILE* tt = fopen("doom.txt", "r");
    //fread(title, 1, 999, tt);
    //printf("%s\n", title);
    //fclose(tt);

    printf("ë‹¹ì‹ ì˜ ì´ë¦„ì€? >");
    scanf("%s", userS.name); 
    printf("%së‹˜ í™˜ì˜í•©ë‹ˆë‹¤. \n", userS.name);
    Sleep(1500);
    
    //ì´ˆê¸° ê°œë°œëª¬ ì„ íƒ
    idx = ChooseMon(devmon);
    AddTeam(devmon, user_mon, idx);
    system("cls");
    printf("ê°œë°œëª¬ ì–¼êµ´ ì¶œë ¥ \n");
    printf("%sê³¼ í•¨ê»˜í•©ë‹ˆë‹¤. ê°œë°œì›ì— ì…ì¥í•©ë‹ˆë‹¤. \n ", user_mon[0].name);
    Sleep(1500);

    RandomSpawn(); //ì„ì‹œ
    while (1)
    {
        if (userS.total_hp == 0) ReSpawn();

        system("cls");
        PrintingMap(); //ë§µ ì¶œë ¥

        printf("ìœ„(w) ì™¼ìª½(a) ì•„ë˜(s) ì˜¤ë¥¸ìª½(d) >");
        scanf("%s", user); 

        //ì…ë ¥ê°’ ê²€ì‚¬
        if (user[0] != 'w' && user[0] != 'a' && user[0] != 's' && user[0] != 'd') continue;
        //í”Œë ˆì´ì–´ ì´ë™
        Move(user); userS.hour++; event = rand() % 100;

        //ë³µë„, ê¸¸('0') ì´ë²¤íŠ¸ (eventê°€ 0~29ì¼ë•Œ ë°œìƒ)
        if (userS.pre_pos == '0' && event < 30)
        {
            printf("ë°°í‹€ì´ ì§„í–‰ë©ë‹ˆë‹¤. \n");
            //ê°œë°œëª¬ ë§Œë‚˜ í„´ì œ ì „íˆ¬ ì‹¤ì‹œ
            //BattleCore();
            Sleep(1500);
        }

        //êµì‹¤('c') ì´ë²¤íŠ¸ (eventê°€ 0~19ì¼ë•Œ ë°œìƒ) //í€´ì¦ˆë‹¨ ë§Œë‚˜ í€´ì¦ˆ í’€ê¸°
        else if (userS.pre_pos == 'c' && event < 20)
        {
            QuestionMon(0); //ìƒì‚° êµì‹¤ ì´ë²¤íŠ¸
            Sleep(1500);
        }
        else if (userS.pre_pos == 'd' && event < 20)
        {
            QuestionMon(1); //ë“œë¡  êµì‹¤ ì´ë²¤íŠ¸
            Sleep(1500);
        }
        else if (userS.pre_pos == 'e' && event < 20)
        {
            QuestionMon(2); //iot êµì‹¤ ì´ë²¤íŠ¸
            Sleep(1500);
        }

        //ê¸‰ì‹ì‹¤('h')
        else if (userS.pre_pos == 'q')
        {
            HealALLHp(user_mon);
            printf("ì²´ë ¥ì´ ëª¨ë‘ íšŒë³µë©ë‹ˆë‹¤. \n");
            Sleep(1500);
        }

        //êµìˆ˜ì‹¤('p')
        else if (userS.pre_pos == 'p')
        {
            printf("êµìˆ˜ì‹¤ì— ë“¤ì–´ì™”ë‹¤! \n"); //êµìˆ˜ì‹¤ ì´ë²¤íŠ¸ ë°œìƒ
            Sleep(1500);
        }
    }
    system("pause");
    return 0;
}

//----------------------------------------------------------------------í•¨ìˆ˜ ë¦¬ìŠ¤íŠ¸
//ë§µ ì¶œë ¥ í•¨ìˆ˜
void PrintingMap(void)
{
    int x = 0, y = 0;

    printf("-----------------------------------------------------------------\n");
    printf("user:%s total_HP:%d Hour:%d Level:%d Xp:", userS.name, userS.total_hp, userS.hour, userS.level);
    for(x=0;x<10-userS.xp/50;x++) printf("O "); //ê²½í—˜ì¹˜ êµ¬í˜„( 50ë‹¹ í•œì¹¸)
    for (x = 0;x < userS.xp / 50;x++) printf("X ");
    printf("\n");
    printf("-----------------------------------------------------------------\n");
    /*printf("user:%s total_HP:%d Hour:%d Level:%d Xp:", userS.name, userS.total_hp, userS.hour, userS.level);
    for (int i = 0;i < 10;i++) printf("ã…");*/

   for(x = 0; x < 25; x++)
    {
        for(y = 0; y < 25; y++)
        {   
            if (map[x][y] == '0')
                printf("â¬œ ");
            else if (map[x][y] == '1')
                printf("ğŸ§± ");
            else if (map[x][y] == '2')
                printf("ğŸšª ");
            else if (map[x][y] == '3')
                printf("ğŸ”’ ");
            else if (map[x][y] == 'c')
                printf("ğŸ¤– ");
            else if (map[x][y] == 'd')
                printf("ğŸ›©ï¸  ");
            else if (map[x][y] == 'e')
                printf("ğŸ’» ");
            else if (map[x][y] == 'h')
                printf("ğŸ¥ ");
            else if (map[x][y] == 'p')
                printf("ğŸ‘¿ ");
            else if (map[x][y] == 'q')
                printf("ğŸš‘ ");
            else if (map[x][y] == 'X')
                printf("ğŸ«   ");
        }
        printf("\n");
    }
}

//ë§µ ì´ë™ í•¨ìˆ˜
void Move(char* user)
{
    map[userS.xpos][userS.ypos] = userS.pre_pos;
    if (user[0] == 'w')
    {
        userS.xpos--;
        if (map[userS.xpos][userS.ypos] == '1') userS.xpos++;
    }
    else if (user[0] == 'a')
    {
        userS.ypos--;
        if (map[userS.xpos][userS.ypos] == '1') userS.ypos++;
    }
    else if (user[0] == 's')
    {
        userS.xpos++;
        if (map[userS.xpos][userS.ypos] == '1') userS.xpos--;
    }
    else if (user[0] == 'd')
    {
        userS.ypos++;
        if (map[userS.xpos][userS.ypos] == '1') userS.ypos--;
        //êµìˆ˜ì‹¤ ì…ì¥ ì¡°ê±´ë¬¸
        if (map[userS.xpos][userS.ypos] == '3' && userS.hour < 900) userS.ypos--;
    }
    userS.pre_pos = map[userS.xpos][userS.ypos];
    map[userS.xpos][userS.ypos] = 'X';
}

//ëœë¤ ìŠ¤í° í•¨ìˆ˜ -> ì•„ì´í…œ ëœë¤ ìŠ¤í°ìœ¼ë¡œ ì´ìš©í•´ë„ ë  ë“¯?
void RandomSpawn(void)
{
    userS.xpos = rand() % 25; userS.ypos = rand() % 25;
    while (map[userS.xpos][userS.ypos] != '0') //ë³µë„(ê¸¸)ì—ë§Œ ë°°ì¹˜ ë˜ë„ë¡
    {
        userS.xpos = rand() % 25; userS.ypos = rand() % 25;
    }
    //userS.pre_pos = '0'; (ì‚­ì œí•´ë„ ë ë“¯ ìœ„ì—ì„œ ì´ˆê¸°í™” í•¨)
    map[userS.xpos][userS.ypos] = 'X';
}

//ë¦¬ìŠ¤í° í•¨ìˆ˜(ì£½ìœ¼ë©´ êµ¬ê¸‰ì°¨ë¡œ ìŠ¤í°)
void ReSpawn(void)
{
    system("cls");
    printf("êµ¬ê¸‰ì°¨ ì´ë¯¸ì§€ ì¶œë ¥ \n");
    printf("ì²´ë ¥ì´ ëª¨ë‘ ì†Œì§„ë˜ì—ˆìŠµë‹ˆë‹¤. êµ¬ê¸‰ì°¨ë¡œ ì´ë™í•©ë‹ˆë‹¤. \n");
    map[userS.xpos][userS.ypos] = userS.pre_pos;
    userS.pre_pos = 'q';
    userS.xpos = 12; userS.ypos = 2; //êµ¬ê¸‰ì°¨ ìœ„ì¹˜
    map[userS.xpos][userS.ypos] = 'X';
    HealALLHp(user_mon);//hp ì „ì²´ íšŒë³µ
    Sleep(1500);
}

//ê°œë°œëª¬ ìˆ˜ ì„¸ëŠ” í•¨ìˆ˜(ë°°ì—´ ì´ë¦„ ì…ë ¥ë°›ìŒ)
int CountMon(DevMon* mon)
{
    int idx = 0;
    while(mon[idx].iNum==idx) idx++; //ê°œë°œëª¬ ìˆ˜ ì„¸ê¸°
    return idx;
}

//íŒ€ ì˜ì… í•¨ìˆ˜(mon1->mon2) idx=mon1ì¸ë±ìŠ¤
void AddTeam(DevMon* mon1, DevMon* mon2, int idx)
{
    //mon1ì˜ idxë²ˆì§¸ ë©¤ë²„ë¥¼ mon2ì— ì¶”ê°€
    int uidx = CountMon(mon2); //mon2ì— ì¶”ê°€ë  ìë¦¬ ì¸ë±ìŠ¤

    mon2[uidx] = mon1[idx]; //mon1ì˜ idxë²ˆì§¸ ê°œë°œëª¬ ì •ë³´ mon2ì— ë³µì‚¬
    mon2[uidx].iNum = uidx; //ê³ ìœ ë²ˆí˜¸ ì„¤ì •

    //ë¹ ì ¸ë‚˜ê°„ ë©¤ë²„ ë¦¬ìŠ¤íŠ¸ì—ì„œ ì œê±° ->ë°°ì—´ ìš”ì†Œ ì œê±° í•¨ìˆ˜ë¡œ ë”°ë¡œ êµ¬í˜„í•´ë„ ë ë“¯!
    for (int i = idx;i < CountMon(mon1) - 1;i++)
    {
        mon1[i] = mon1[i + 1];
        mon1[i].iNum--;
    }
    mon1[NUM - 1] = init_mon; //ë¹ˆìë¦¬ ì´ˆê¸°í™”

    UpdateHp();
}

//ìœ ì € hpì •ë³´ ê°±ì‹ 
void UpdateHp(void)
{
    userS.total_hp = 0; userS.max_hp = 0;
    for (int i = 0;i < CountMon(user_mon);i++)
    {
        userS.total_hp += user_mon[i].hp;
        userS.max_hp += user_mon[i].max_hp;
    }
}

//Hp ì „ì²´ íšŒë³µ (ë°°ì—´ ì´ë¦„ ì…ë ¥ ë°›ìŒ)
void HealALLHp(DevMon* mon)
{
    for (int i = 0;i < CountMon(mon);i++) mon[i].hp = mon[i].max_hp;
    if (mon == user_mon) userS.total_hp = userS.max_hp; //ìœ ì € ê°œë°œëª¬ì¼ë•Œ ì •ë³´ ê°±ì‹ 
}

//monë¦¬ìŠ¤íŠ¸ì˜ idxë²ˆ ë©¤ë²„ amountë§Œí¼ íšŒë³µ
void HealHp(DevMon* mon, int amount, int idx)
{
    mon[idx].hp += amount;
    if (mon == user_mon) userS.total_hp += amount;
}

//monë¦¬ìŠ¤íŠ¸ì˜ idxë²ˆ ê°œë°œëª¬ Hp amount ë§Œí¼ ê¹ì„
void MinusHp(DevMon* mon, int idx, int amount)
{
    mon[idx].hp -= amount;
    if (mon == user_mon) userS.total_hp -= amount;
}

//monë¦¬ìŠ¤íŠ¸ ì „ì²´ ê°œë°œëª¬ Hp amount ë§Œí¼ ê¹ì¼ë•Œ
void MinusALLHp(DevMon* mon, int amount)
{
    if (userS.total_hp == 1)
    {
        userS.total_hp = 0; return;
    }
    int idx = CountMon(mon);
    for (int i = 0;i < idx;i++)
    {
        MinusHp(mon, i, amount);
    }
}

//ê°œë°œëª¬ ì „íˆ¬ í•¨ìˆ˜
//void BattleMon(void);

//í€´ì¦ˆë‹¨ ì§€ê°‘ í„¸ê¸° //ìˆ˜ì‹ í…ŒìŠ¤íŠ¸
void QuestionMon(int cnum) //í´ë˜ìŠ¤ ìœ„ì¹˜ ë°›ê¸°(ìƒì‚°: 0, ë“œë¡ : 1, iot: 2)
{
    //í€´ì¦ˆë‹¨: iot-ë¦¬ë¶ë…˜, ë“œë¡ -ìµœí•˜ë¬¸, ìƒì‚°-ë¥˜ì²­ê±¸
    char* teacher[3] = { "ë¥˜ì²­ê±¸","ìµœí•˜ë¬¸","ë¦¬ë¶ë…˜" };
    //í€´ì¦ˆ ë¦¬ìŠ¤íŠ¸- ìµœì†Œ 3ê°œ í•„ìš”, ì •ë‹µë„ í•¨ê»˜ ì €ì¥í•  ìˆ˜ ìˆëŠ” 2ì°¨ì› ë°°ì—´ ì´ìš©?
    //ì‚°ìˆ˜ ë¬¸ì œë¡œ!
    int num1, num2;
    int answer, qcount = 0;

    printf("%s êµìˆ˜ë‹˜ì„ ë§ˆì£¼ì³¤ë‹¤! \n", teacher[cnum]);

    while (qcount < 3)
    {
        num1 = rand() % 100 + 1, num2 = rand() % 100 + 1;
        printf("%dë²ˆì§¸ ë¬¸ì œë¥¼ ë‚´ê² ë‹¤! \n", qcount + 1);
        printf("%d + %d = ?\b", num1, num2);
        scanf("%d", &answer); 

        //í€´ì¦ˆ ë§ì¶”ë©´ í•˜ë‚˜ë‹¹ ê²½í—˜ì¹˜ íšë“
        if (answer == num1 + num2)
        {
            printf("ë§ì·„ë‹¤!! \n");
            userS.xp += 50; qcount++;
            printf("ê²½í—˜ì¹˜ê°€ 50ë§Œí¼ ì˜¬ëìŠµë‹ˆë‹¤. \n");
            if (userS.xp > 500) //xp 500ë‹¹ ë ˆë²¨ì—… -->ë‚˜ì¤‘ì— í•¨ìˆ˜ ë§Œë“¤ì–´ì•¼í•¨
            {
                printf("ë ˆë²¨ì—…ì„ í–ˆë‹¤!!! \n");
                userS.level++; userS.xp = 0;
                for (int i = 0;i < CountMon(user_mon);i++)
                {
                    user_mon[i].max_hp += 100; user_mon[i].max_mp += 50;
                    user_mon[i].power += 20; user_mon[i].sk_power += 20;
                } UpdateHp();
                HealALLHp(user_mon);
            }

            continue;
        }
        else //í‹€ë¦¬ë©´ hp -50%
        {
            printf("í‹€ë ¸ì–´!!! ê³µë¶€ ë‹¤ì‹œ í•˜ê³  ì™€!\n");
            MinusALLHp(user_mon, (userS.total_hp * 0.5) / CountMon(user_mon));
            //userS.total_hp>0 ì´ë©´ ê·¸ëƒ¥ ì¢…ë£Œ, ==0ì´ë©´ ê¸‰ì‹ì‹¤ ë¦¬ìŠ¤í°
            return; //í•¨ìˆ˜ ì¢…ë£Œ(í”Œë ˆì´ì–´ ìœ„ì¹˜ ë³€í™” ì—†ìŒ)
        }
    }
    //ë‹¤ ë§ì·„ì„ ì‹œ HpíšŒë³µ, 
    if (qcount == 3)
    {
        HealALLHp(user_mon);
        printf("ì²´ë ¥ì´ ëª¨ë‘ íšŒë³µë˜ì—ˆë‹¤! \n");
    }
}

//mon ë¦¬ìŠ¤íŠ¸ ì¶œë ¥
void PrintingMon(DevMon* mon)
{
    // ê° ê°œë°œëª¬ì˜ ì–¼êµ´/ì´ë¦„/ëŠ¥ë ¥ì¹˜ ì¶œë ¥(ì„ì‹œ: ì´ë¦„ê³¼ ëŠ¥ë ¥ì¹˜ ë¦¬ìŠ¤íŠ¸ë¡œ ì¶œë ¥)
    for (int i = 0;i < CountMon(mon);i++) //ê°œë°œëª¬ ë¦¬ìŠ¤íŠ¸ ì¶œë ¥
    {
        printf("%d)", i + 1);
        printf("name: %s hp: %d mp: %d ", mon[i].name, mon[i].hp, mon[i].mp);
        printf("power: %d sk_power: %d\n", mon[i].power, mon[i].sk_power);
    }
}

//ê°œë°œëª¬ ì„ íƒ(mon ë¦¬ìŠ¤íŠ¸ì—ì„œ ì„ íƒí•œ ë©¤ë²„ì˜ ì¸ë±ìŠ¤ ë°˜í™˜)
int ChooseMon(DevMon* mon)
{
    int choose = 0, idx = 0; //ì„ íƒ íŠ¸ë¦¬ê±°, ì¸ë±ìŠ¤ ë„˜ë²„
    char user[2];

    while (choose != 1)
    {
        system("cls");

        //idxë²ˆ ê°œë°œëª¬ì˜ ì–¼êµ´, ì´ë¦„, ëŠ¥ë ¥ì¹˜ë¥¼ ì¶œë ¥í•´ì•¼í•¨
        printf("í•¨ê»˜í•  ê°œë°œëª¬ì„ ì„ íƒí•´ì£¼ì„¸ìš”> \n");
        printf("%dë²ˆ ê°œë°œëª¬ ì–¼êµ´ \n",idx); //ì´ë¯¸ì§€ ë“¤ì–´ê°ˆ ê³³
        printf("--------------------------------------------------------------------------------\n");
        printf("ì´ë¦„: %s\t HP: %-5d MP: %-5d ê³µê²©ë ¥: %-5d íŠ¹ìˆ˜ê³µê²©ë ¥: %-5d \n",mon[idx].name,mon[idx].hp,mon[idx].mp,mon[idx].power,mon[idx].sk_power);
        printf("--------------------------------------------------------------------------------\n");
        printf("%sì„ ì„ íƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?(ì„ íƒ: Y/ë‹¤ìŒìœ¼ë¡œ: N): ",mon[idx].name); 

        scanf("%s", user); // y-> í•´ë‹¹ ê°œë°œëª¬ ì •ë³´ ì €ì¥ / n-> ë‹¤ìŒ ê°œë°œëª¬ ì •ë³´ ì¶œë ¥ 

        //ì…ë ¥ê°’ ê²€ì‚¬
        if (user[0] == 'y' || user[0] == 'Y') choose = 1;
        else if (user[0] == 'n' || user[0] == 'N') idx = (idx + 1) % CountMon(mon);
        else
        {
            printf("ì˜ëª»ëœ ì…ë ¥ì…ë‹ˆë‹¤. ë‹¤ì‹œ ì„ íƒí•´ì£¼ì„¸ìš”. \n");
            Sleep(500);
            continue;
        }
    }
    return idx;
}

//ê°œë°œëª¬ ì´ˆê¸° ëŠ¥ë ¥ì¹˜ ì„¤ì •
void init_play(void)
{
    for (int i = 0;i < NUM;i++)
    {
        devmon[i].hp = rand() % 100 + 200; devmon[i].max_hp = devmon[i].hp; //ìµœì†Œ ëª‡ ìµœëŒ€ ëª‡
        devmon[i].mp = rand() % 50 + 50; devmon[i].max_mp = devmon[i].mp;
        devmon[i].power = rand() % 10 + 10;
        devmon[i].sk_power = rand() % 20 + 50;
    }
}